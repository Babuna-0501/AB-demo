(function(){function f(){m.setLazyLoad();e(d.section).target.forEach(function(a){c.instances.has(a)?c.instances.get(a).reInit():new c(a)})}var n=window.sg.common.libs,e=window.sg.common.$q,g=window.sg.common.utils,h=window.sg.common.video,m=window.sg.common.lazyLoad,k=window.sg.common.constants.BREAKPOINTS,l=window.sg.common.utils.setMobileFocusLoop,p=window.sg.common.utils.removeMobileFocusLoop,d={section:".st-feature-benefit-full-bleed",sectionInner:".st-feature-benefit-full-bleed__wrap",btnWrap:".st-feature-benefit-full-bleed__cta",
btn:".st-feature-benefit-full-bleed__cta .js-video-play, .js-showroom",pop:".st-feature-benefit-full-bleed__video",video:"div.video",close:".st-feature-benefit-full-bleed__close",layerTypeVideo:"st-feature-benefit-full-bleed--video-layer",ctaButton:".cta[data-target-popup-id]"},c=function(a){var b=this;this.ele={section:e(a),window:e(window),sectionInner:null,btnWrap:null,btn:null,pop:null,ctaButton:null,loopFirst:null,loopEnd:null};this.setProperty();this.setMobileFocusLoop=this.isPc=null;this.event=
{focusLock:this.eventFocusLock.bind(this)};this.handler={clickCtaButton:function(a){var b=e(null);if("string"===typeof a.target.dataset.targetPopupId){var d=a.target.dataset.targetPopupId.trim().replace("#","");""!==d&&(b=e("#"+d))}b.hasClass("pr-g-j2a-converter")?window.sg.components.prGj2aCover.openPopup(b.target[0],a.currentTarget):b.css({display:"block",overflow:"hidden"})},resize:function(){b.setVideoSize()}};c.instances.set(a,this);this.init()};c.prototype.setProperty=function(){var a=this;
this.ele.sectionInner=this.ele.section.find(d.sectionInner);this.ele.btnWrap=this.ele.section.find(d.btnWrap);this.ele.btn=this.ele.section.find(d.btn);this.ele.pop=this.ele.section.find(d.pop);this.ele.video=this.ele.pop.find(d.video).target[0];this.ele.close=this.ele.section.find(d.close);this.ele.ctaButton=this.ele.section.find(d.ctaButton);this.ele.LayerPopup=null;(this.contentVideo=this.ele.section.find(".st-feature-benefit-full-bleed__figure").hasClass("s-video-bg"))&&setTimeout(function(){var b=
a.ele.section.find(".st-feature-benefit-full-bleed__figure.s-video-bg").find(d.video);"mp4"===b.attr("data-video-type")&&JSON.parse(b.attr("data-video-data")).controls&&a.ele.section.find(".st-feature-benefit-full-bleed__figure.s-video-bg").find("video").attr("tabindex","0")},500)};c.prototype.eventFocusLock=function(a){a.keyCode===n.keyCode.TAB_KEY&&(!1===a.shiftKey&&this.ele.LayerPopup.find(d.close).target[0]===document.activeElement?(a.preventDefault(),this.ele.LayerPopup.focus()):!0===a.shiftKey&&
this.ele.LayerPopup.target[0]===document.activeElement&&(a.preventDefault(),this.ele.close.focus()))};c.prototype.setVideoSize=function(){if(!1!==this.isMobilePcDim&&null!==this.ele.LayerPopup&&"block"===this.ele.LayerPopup.target[0].style.display){var a=this.ele.LayerPopup.find(".st-feature-benefit-full-bleed__video-wrap, .st-feature-benefit-full-bleed__showroom-wrap").target[0];a.classList.contains("st-feature-benefit-full-bleed__showroom-wrap")?"desktop"===g.getCurrentDevice()?.9*window.innerHeight<
8.1*window.innerWidth/16?(a.style.width=14.4*window.innerHeight/9+"px",a.style.height=.9*window.innerHeight+"px"):(a.style.width=.9*window.innerWidth+"px",a.style.height=8.1*window.innerWidth/16+"px"):.9*window.innerWidth<7.2*window.innerHeight/16?(a.style.height=14.4*window.innerWidth/9+"px",a.style.width=.9*window.innerWidth+"px"):(a.style.height=.8*window.innerHeight+"px",a.style.width=7.2*window.innerHeight/16+"px"):this.ele.btn.hasClass("video-display--vertical")?.9*window.innerWidth<7.2*window.innerHeight/
16?(a.style.height=14.4*window.innerWidth/9+"px",a.style.width=.9*window.innerWidth+"px"):(a.style.height=.8*window.innerHeight+"px",a.style.width=7.2*window.innerHeight/16+"px"):"desktop"===g.getCurrentDevice()?.9*window.innerHeight<8.1*window.innerWidth/16?(a.style.width=14.4*window.innerHeight/9+"px",a.style.height=.9*window.innerHeight+"px"):(a.style.width=.9*window.innerWidth+"px",a.style.height=8.1*window.innerWidth/16+"px"):(a.style.width=window.innerWidth+"px",a.style.height=9*window.innerWidth/
16+"px")}};c.prototype.openPopup=function(a){var b=this,c=!1===a.classList.contains("js-showroom");c?this.ele.LayerPopup=this.ele.section.find(".st-feature-benefit-full-bleed__video-layer"):(this.ele.LayerPopup=this.ele.section.find(".st-feature-benefit-full-bleed__showroom-layer"),this.ele.LayerPopup.find("iframe").attr("src",a.dataset.href));this.ele.LayerPopup.css({display:"block"});this.ele.LayerPopup.attr("tabindex",0);c&&(h.init(this.ele.video),this.contentVideo&&this.ele.section.find(d.video).find(".video-player").target[0].pause());
var f=this.ele.section.hasClass(d.layerTypeVideo)||!1===c;if(f||!(k.MOBILE<g.getViewPort().width))this.ele.window.off("keydown",this.event.focusLock).on("keydown",this.event.focusLock);setTimeout(function(){b.ele.LayerPopup.attr("tabindex",0);b.ele.LayerPopup.find(".st-feature-benefit-full-bleed__close").focus();!0!==f?(b.isPc=null,k.MOBILE>=g.getViewPort().width?(l(b.ele.LayerPopup.target[0]),b.setMobileFocusLoop=!0,g.hiddenScroll()):b.ele.sectionInner.attr("aria-hidden",!0)):(!0!==b.setMobileFocusLoop&&
(l(b.ele.LayerPopup.target[0]),b.setMobileFocusLoop=!0),g.hiddenScroll(),e(window).off("resize",b.handler.resize).on("resize",b.handler.resize))},400);c&&"mp4"===this.ele.video.getAttribute("data-video-type")&&JSON.parse(this.ele.video.getAttribute("data-video-data")).controls&&e(this.ele.video).find("video").attr("tabindex","0");this.ele.btnWrap.find(".cta").attr("tabindex","-1");f&&this.handler.resize()};c.prototype.closePopup=function(){var a=this;this.ele.sectionInner.removeAttr("aria-hidden");
this.ele.btnWrap.find(".cta").removeAttr("tabindex");this.ele.btnWrap.find(".cta").css({display:"inline-flex"});!0===this.setMobileFocusLoop&&(p(),this.setMobileFocusLoop=!1);setTimeout(function(){a.ele.LayerPopup.hasClass("st-feature-benefit-full-bleed__video-wrap")?a.ele.section.find(".st-feature-benefit-full-bleed__cta .js-video-play").focus():a.ele.section.find(".js-showroom").focus();a.ele.LayerPopup.css({display:"none"});h.dispose(a.ele.video);a.contentVideo&&a.ele.section.find(d.video).find(".video-player").target[0].play();
a.ele.LayerPopup.find(".st-feature-benefit-full-bleed__video-wrap, .st-feature-benefit-full-bleed__showroom-wrap").css({width:"",height:""});a.ele.LayerPopup=null},200);this.ele.LayerPopup.attr("tabindex","");g.visibleScroll();e(window).off("resize",this.handler.resize)};c.prototype.init=function(){this.bindEvents()};c.prototype.reInit=function(){this.setProperty();this.bindEvents()};c.prototype.bindEvents=function(){var a=this;this.ele.btn.off("click").on("click",function(b){a.openPopup(b.currentTarget)});
this.ele.close.off("click").on("click",function(){a.closePopup()});this.ele.ctaButton.target.forEach(function(b){e(b).off("click",a.handler.clickCtaButton).on("click",a.handler.clickCtaButton)})};c.instances=new WeakMap;window.sg.components.featureBenefitFullBleed={init:f,reInit:f};e.ready(f);e.load(f)})();